## DES
### DES의 원리
---
#### 순열, 치환, 곱 암호
혼돈 성질과 확산 성질을 만족하기 위해 사용한다. 치환과 순열은 단순하지만 이것을 여러번 반복해서 하게 되면 혼돈과 확산의 성질을 모두 만족한다. 이런 식으로 치환과 순열로 라운드를 구성 후 여러 번 반복하는 암호를 곱 암호라고 한다.
#### 페이스텔 구조
1. 입력으로 들어온 블록을 동일한 길이의 블록 두개로 나눈다.
2. 각 라운드마다 오른쪽 블록은 다음 라운드의 왼쪽 블록으로 입력된다.
3. 왼쪽 블록은 오른쪽 블록에 라운드함수 F를 적용한 결과와 XOR되어 다음 라운드의 오른쪽 블록으로 입력된다.
* 암호의 특징
역함수가 존재하지 않는다. 암호화에 사용한 라운드 키를 역순으로 입력하면 복호화가 이루어진다. 
### DES의 과정
---
#### 1. 초기 순열, 최종 순열
시작에는 초기 순열을, 끝에는 최종 순열을 사용한다. 정해진 테이블을 이용하여 64비트 단위로 전치한다. 테이블의 n번째 값이 m일 때, 출력의 n번째 비트는 입력의 m번째 비트가 된다. 서로 역관계에 있다.
#### 2. 라운드 함수
오른쪽 블록만 입력되므로, 입력의 길이는 32비트이다. 라운드 함수는 **확장 순열(Expansion P-Box)**, **라운드 키 결합(XOR)**, **치환 테이블(S-Box)**, **고정 순열(Straight P-Box)**로 이루어져 있다.
#### 2-1. 확장 순열과 라운드 키 결합
확장 순열은 입력을 비트 단위로 전치하는 동시에, 전체 길이를 48비트로 확장한다. 이 과정에서 32비트의 입력값을 4비트씩 8개의 부분으로 나누고, 테이블을 참조하여 각각을 6비트로 확장한다.   
라운드 키 결합은 확장 순열로 나온 출력을 라운드 키K와 xor하는 방식이다.
#### 2-2. S-BOX와 고정 순열
S-BOX는 라운드 키 결합에서 출력된 48비트 결과 값을 32비트로 축소합니다. S-BOX는 4개의 행과 16개의 열로 이루어진 표를 사용하는데, 표의 각 값은 4비트로 표현되는 수이다.    
고정순열로 다시 비트 단위 전치를 한다.
#### 키 생성 함수
64비트의 입력을 받아 각 라운드에 필요한 48비트 라운드 키를 생성하는 함수다. 
* 패리티 비트 제거
입력에서 패리티 비트를 제거하고, 남은 56비트에 순열을 적용하는 과정이다. DES의 비밀키에서 각 바이트의 가장 오른쪽 비트는 자신이 속한 바이트의 나머지 대한 홀수 패리티 비트입니다. 패리티 비트는 통신 중에 비트 반전이 일어나지 않았음을 보증하는 역할을 한다.
* 쉬프트
입력을 왼쪽 28비트와 오른쪽 28비트와 오른쪽 28비트로 나누어 각각을 1비트나 2비트만큼 왼쪽으로 순환 쉬프트하는 과정이다.
* 압축 순열
56비트의 입력을 48비트 길이로 압축하는 과정이다.
### DES의 응용
---
#### 다중 DES
서로 다른 키를 사용하는 DES모듈을 여러 개 이어붙여서 DES의 약점을 보완한 암호 시스템이다. DES를 두 겹으로 사용하는 이중 DES는 112비트, 삼중 DES는 168비트의 키를 가진다. 하지만 이것도 중간 일치 공격으로 인해 안정성을 높이지는 못했다.
* 중간 일치 공격
평문 p와 암호문 c가 있을 때, 56비트 키 공간 K에서 가능한 모든 키 k1으로 p를 암호화한 집합 s1을 만들고, K에서 가능한 모든 키 k2로 c를 복호화하여 s2를 생성한다. s1과 s2의 모든 원소에 대해 Ek1(p) = Dk2(c)를 만족하는 k1과 k2의 쌍으로 CK를 갱신한다. 다른 평문 !p와 !c를 생성한다. CK의 모든 원소에 대해 Ek1(!p) = Dk2(!c)를 만족하는 CK를 만든다. CK의 원소가 하나가 될때까지 !p와 !c를 만들어 검사한다.